<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>如何优雅地使用服务器 | YiFei Zhang&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="stylesheet" href="https://cdn.bootcss.com/prism/9000.0.1/themes/prism.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/KaTeX/0.5.1/katex.min.css">
    <script charset="utf-8" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async="true"></script>
    <link rel="icon" type="image/png" href="https://avatars2.githubusercontent.com/u/16968934?s=460&amp;v=4">
    <meta name="description" content="在这里了解我的一切，对编程的热爱永不停歇。">
    
    <link rel="preload" href="/assets/css/0.styles.0ff818ed.css" as="style"><link rel="preload" href="/assets/js/app.bcd4454e.js" as="script"><link rel="preload" href="/assets/js/11.05d3e33d.js" as="script"><link rel="preload" href="/assets/js/4.75c217d6.js" as="script"><link rel="preload" href="/assets/js/8.cabf8971.js" as="script"><link rel="preload" href="/assets/js/41.0bc4bcfe.js" as="script"><link rel="preload" href="/assets/js/3.62f894e9.js" as="script"><link rel="prefetch" href="/assets/js/10.e1ca0b20.js"><link rel="prefetch" href="/assets/js/12.0132a1d0.js"><link rel="prefetch" href="/assets/js/13.9f313e03.js"><link rel="prefetch" href="/assets/js/14.f1465f38.js"><link rel="prefetch" href="/assets/js/15.be029178.js"><link rel="prefetch" href="/assets/js/16.289054b9.js"><link rel="prefetch" href="/assets/js/17.2b4fafe4.js"><link rel="prefetch" href="/assets/js/18.21bd011d.js"><link rel="prefetch" href="/assets/js/19.f33689d4.js"><link rel="prefetch" href="/assets/js/2.fe237bcd.js"><link rel="prefetch" href="/assets/js/20.aa204a72.js"><link rel="prefetch" href="/assets/js/21.7f4b0749.js"><link rel="prefetch" href="/assets/js/22.998ce568.js"><link rel="prefetch" href="/assets/js/23.cbede4fb.js"><link rel="prefetch" href="/assets/js/24.7c402c99.js"><link rel="prefetch" href="/assets/js/25.e0d41889.js"><link rel="prefetch" href="/assets/js/26.8a6feb55.js"><link rel="prefetch" href="/assets/js/27.c04ec6b1.js"><link rel="prefetch" href="/assets/js/28.d1600f01.js"><link rel="prefetch" href="/assets/js/29.f5369b87.js"><link rel="prefetch" href="/assets/js/30.cdd43519.js"><link rel="prefetch" href="/assets/js/31.b08df415.js"><link rel="prefetch" href="/assets/js/32.c2d969f9.js"><link rel="prefetch" href="/assets/js/33.1d323e5d.js"><link rel="prefetch" href="/assets/js/34.3656ac05.js"><link rel="prefetch" href="/assets/js/35.5d1bec64.js"><link rel="prefetch" href="/assets/js/36.5ceb42fc.js"><link rel="prefetch" href="/assets/js/37.3667ae0d.js"><link rel="prefetch" href="/assets/js/38.24a2ae9c.js"><link rel="prefetch" href="/assets/js/39.4724f8f3.js"><link rel="prefetch" href="/assets/js/40.eb4d5d7a.js"><link rel="prefetch" href="/assets/js/42.3b7d5539.js"><link rel="prefetch" href="/assets/js/43.f46aed43.js"><link rel="prefetch" href="/assets/js/5.985cce7c.js"><link rel="prefetch" href="/assets/js/6.08f9588d.js"><link rel="prefetch" href="/assets/js/7.9aba82c0.js"><link rel="prefetch" href="/assets/js/9.d78be9b4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0ff818ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="header-wrap" data-v-33920667><div class="header page" data-v-33920667><div class="left" data-v-33920667><div class="motto" data-v-33920667></div> <div class="nav" data-v-33920667></div></div> <div class="right" data-v-33920667><div class="search-box" data-v-33920667><input aria-label="Search" placeholder="" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></div> <div class="page post-page"><div class="title"><div class="post-title">如何优雅地使用服务器</div></div> <div class="info"><div class="author">Yidadaa</div> <div class="date">2017/09/23</div> <div class="count"><span id="busuanzi_value_page_pv"></span> <span>views</span></div></div> <div class="post-content"><div class="content__default"><h1 id="如何优雅地使用服务器"><a href="#如何优雅地使用服务器" class="header-anchor">#</a> 如何优雅地使用服务器</h1> <p>最近师兄给我分配了一个实验室服务器地账号，自己就琢磨着怎么好好地折腾一下这个服务器，但无奈我的账号没有root权限，安装软件只能通过自己编译的方式完成，并且师兄只分配给我一个端口，我要想运行什么web服务，只能绑定到这一个端口上面，一头雾水之际，突然看到了一个神器：SSH端口转发。</p> <h2 id="什么是ssh端口转发"><a href="#什么是ssh端口转发" class="header-anchor">#</a> 什么是SSH端口转发？</h2> <p>让我们先来了解一下端口转发的概念吧。我们知道，SSH 会自动加密和解密所有 SSH 客户端与服务端之间的网络数据。但是，SSH 还同时提供了一个非常有用的功能，这就是端口转发。它能够将其他 TCP 端口的网络数据通过 SSH 链接来转发，并且自动提供了相应的加密及解密服务。这一过程有时也被叫做“隧道”（tunneling），这是因为 SSH 为其他 TCP 链接提供了一个安全的通道来进行传输而得名。例如，Telnet，SMTP，LDAP 这些 TCP 应用均能够从中得益，避免了用户名，密码以及隐私信息的明文传输。而与此同时，如果您工作环境中的防火墙限制了一些网络端口的使用，但是允许 SSH 的连接，那么也是能够通过将 TCP 端口转发来使用 SSH 进行通讯。总的来说 SSH 端口转发能够提供两大功能：</p> <ul><li>加密 SSH Client 端至 SSH Server 端之间的通讯数据。</li> <li>突破防火墙的限制完成一些之前无法建立的 TCP 连接。</li></ul> <p>上面是我复制粘贴<a href="https://www.ibm.com/developerworks/cn/linux/l-cn-sshforward/" target="_blank" rel="noopener noreferrer">别人的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，总而言之，端口转发就是将所有发送到server_1的m端口的请求转发到server_2的n端口上去，并且两个端口之间的转发，通过SSH加密完成，也就是说，只需要涉密服务器上的一个SSH端口，就可以通过端口转发功能来为我们提供各种各样的服务。</p> <h2 id="如何使用端口转发"><a href="#如何使用端口转发" class="header-anchor">#</a> 如何使用端口转发？</h2> <p>首先要确定你电脑装了ssh，命令行里输一下ssh即可，然后使用下面的命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ssh</span> <span class="token parameter variable">-L</span> <span class="token operator">&lt;</span>local port<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>remote host<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>remote port<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>SSH hostname<span class="token operator">&gt;</span>
</code></pre></div><p>举个例子，我服务器的IP地址是<code>123.123.1.123</code>，SSH端口号是<code>88</code>，我在服务器的<code>8888</code>端口上开了一个<code>jupyter-notebook</code>的服务，那么我要想在我的笔记本上使用这个服务，就要将本地的<code>8888</code>端口给映射到服务器的<code>8888</code>端口去，那么我只需要输入命令<code>ssh -L 8888:localhost:8888 username@123.123.1.123 -p 88</code>，然后输入密码，映射就成功了，这时候访问本地的<code>8888</code>端口，就相当于访问服务器的<code>8888</code>端口了。</p> <h2 id="还有其他的吗"><a href="#还有其他的吗" class="header-anchor">#</a> 还有其他的吗？</h2> <p>当然有啦，为了全面模拟xshell的使用体验（大雾），当然还需要一个静态文件服务啦，可以用一行代码<code>python -m SimpleHTTPServer 100</code>在100端口开一个静态文件服务，然后用<code>ssh</code>转发100端口，这样就就可以在本地查看服务器的文件了，可以在调参的时候看生成的图片文件，当然了，我的野心不止于此，之后开始跑网络的时候，可以也用来扩展TensorBoard的功能。</p> <p>除此之外，还有其他的神奇的命令行可以使用，比如终端管理软件tmux，功能上与screen差不过，如果不不了解screen，可以查阅一下，tmux赋予了命令行的窗口化功能，可以分割、调整当前的终端窗口，经过配置之后可以获得非常不错的效果，当然啦，具体的配置还是去网上搜吧，一千人的电脑里有一千个终端配置，程序员还是要有自己的风格才行。</p></div></div> <!----></div> <div class="footer" data-v-3ef679b5><div class="footer-content page" data-v-3ef679b5><div class="left" data-v-3ef679b5><div class="footer-title" data-v-3ef679b5>FRIEND LINKS</div> <div class="links footer-text" data-v-3ef679b5></div> <div class="footer-text" data-v-3ef679b5><span id="busuanzi_container_site_pv" class="footer-count" data-v-3ef679b5><span id="busuanzi_value_site_pv" data-v-3ef679b5></span> <span id="busuanzi_value_site_uv" data-v-3ef679b5></span></span> <div class="counter" data-v-3ef679b5><div class="counter-title" data-v-3ef679b5>PAGE VIEWS</div> <div class="counter-content" data-v-3ef679b5><span class="counter-number" data-v-3ef679b5>0</span><span class="counter-number" data-v-3ef679b5>0</span><span class="counter-number" data-v-3ef679b5>0</span><span class="counter-number" data-v-3ef679b5>0</span><span class="counter-number" data-v-3ef679b5>0</span></div></div> <div class="counter" data-v-3ef679b5><div class="counter-title" data-v-3ef679b5>USER VIEWS</div> <div class="counter-content" data-v-3ef679b5><span class="counter-number" data-v-3ef679b5>0</span><span class="counter-number" data-v-3ef679b5>0</span><span class="counter-number" data-v-3ef679b5>0</span><span class="counter-number" data-v-3ef679b5>0</span><span class="counter-number" data-v-3ef679b5>0</span></div></div></div> </div> <div class="right" data-v-3ef679b5><div class="footer-title power" data-v-3ef679b5>POWERED BY</div> <a href="https://github.com/Yidadaa/Issue-Blog-With-Github-Action" class="logo" data-v-3ef679b5>ISSUE BLOG</a></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.bcd4454e.js" defer></script><script src="/assets/js/11.05d3e33d.js" defer></script><script src="/assets/js/4.75c217d6.js" defer></script><script src="/assets/js/8.cabf8971.js" defer></script><script src="/assets/js/41.0bc4bcfe.js" defer></script><script src="/assets/js/3.62f894e9.js" defer></script>
  </body>
</html>
